<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../components/page-header.html">
<link rel="import" href="../components/page-panel.html">
<link rel="import" href="../../redux-behavior.html">
<link rel="import" href="../../nylon-behavior.html">
<link rel="import" href="../../layout/shared-styles.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../components/nylon-panel-right.html">
<link rel="import" href="./components/payment-list.html">
<link rel="import" href="./components/payment-manage.html">
<link rel="import" href="./components/payment-search.html">
<link rel="import" href="./components/payment-setting.html">
<link rel="import" href="../page-money/page-money.html">

<dom-module id="page-payment">
    <template>
        <style include="shared-styles">
            #page1:checked~#subcontent1,
            #page2:checked~#subcontent2 {
                display: block;
            }
        </style>
        <div class="container">
            <page-header label="ชำระเงินค่าธรรมเนียมพิเศษ">
                <paper-button class="gl-btn-primary" on-tap="settingPage" raised>
                    ตั้งค่า
                </paper-button>
            </page-header>
            <div class="section">
                 <main>
                    <input id="page1" value="list_1" type="radio" name="tabs" checked>
                    <label for="page1">ชำระค่าธรรมเนียม</label>

                    <input id="page2" value="list_2" type="radio" name="tabs">
                    <label for="page2">ประวัติการชำระค่าธรรมเนียม</label>
                    <section id="subcontent1">
                        <payment-search></payment-search>
                        <div class="white-space"></div>
                        <payment-list></payment-list> 
                    </section>
                    <section id="subcontent2">
                        <!--  -->
                         <page-money></page-money> 
                    </section>
                 </main>
             
            </div>
            <nylon-panel-right id="panelRight" title="พิมพ์ใบเสร็จ" width="90%">
                <iron-pages selected="{{selected}}" attr-for-selected="name">
                    <div name="manage">
                        <payment-manage></payment-manage>
                    </div>
                    <div name="setting">
                        <payment-setting></payment-setting>
                    </div>
                </iron-pages>
            </nylon-panel-right>
        </div>
    </template>
    <script>
        Polymer({
            is: 'page-payment',
            behaviors: [NylonBehavior,ReduxBehavior],
            listeners:{
                'open-manage':'openPanel',
                'open-setting' : 'settingPage'
            },
            properties:{
                dataList: {
                    statePath: 'payment.paymentList'
                }
            },
            nylonPageActive: function () {
                this.dispatchAction('COMMON_DATA_GET_YEAR');
                this.dispatchAction('COMMON_DATA_GET_BANK');
            },
            openPanel:function(){
                this.selected = 'manage';
                this.$.panelRight.open()
            },
            settingPage:function(){
                this.selected = 'setting';
                this.dispatchAction('FEE_GET_SETTING')
                this.$.panelRight.open()
            }
        });
    </script>
</dom-module>