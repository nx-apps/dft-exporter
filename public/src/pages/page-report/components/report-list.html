<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../layout/shared-styles.html">
<link rel="import" href="../../../nylon-behavior.html">
<link rel="import" href="../../../redux-behavior.html">
<link rel="import" href="../../components/page-header.html">
<link rel="import" href="../../components/page-panel.html">
<link rel="import" href="../../../../bower_components/vaadin-combo-box/vaadin-combo-box.html">
<link rel="import" href="../../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../../bower_components/vaadin-grid/vaadin-grid.html">
<link rel="import" href="./../../components/format-number-behavior.html">
<link rel="import" href="./../../components/custom-grid-zoom.html">


<dom-module id="report-list">
    <template>
        <style include="shared-styles"></style>
        <custom-grid-zoom>
        <vaadin-grid slot="grid" id="material" items="[[dataList]]" size="200">
            
             <vaadin-grid-column width="10px">
                <template class="header">
                    <!--<div class="cell">ลำดับ</div>-->
                </template>
                <template>
                    <!--<div class="cell">[[index]]</div>-->
                </template>
            </vaadin-grid-column>

            <vaadin-grid-column width="100px">
                <template class="header">
                    <div class="cell">ลำดับ</div>
                </template>
                <template>
                    <div class="cell">[[count(index)]]</div>
                </template>
            </vaadin-grid-column>

            <vaadin-grid-column width="100px">
                <template class="header">
                    <div class="cell">บริษัท</div>
                </template>
                <template>
                    <div class="cell">[[item.exporter_name]]</div>
                </template>
            </vaadin-grid-column>

            <vaadin-grid-column width="100px">
                <template class="header">
                    <div class="cell">ปริมาณ</div>
                </template>
                <template>
                    <div class="cell">[[formatNumber(item.weight)]]</div>
                </template>
            </vaadin-grid-column>

            <vaadin-grid-column width="100px">
                <template class="header">
                    <div class="cell">สถานะเอกสาร</div>
                </template>
                <template>
                    <div class="cell">[[item.type_doc_th]]</div>
                </template>
            </vaadin-grid-column>

            <vaadin-grid-column width="100px">
                <template class="header">
                    <div class="cell">จัดการ</div>
                </template>
                <template>
                    <div class="cell">
                        <paper-icon-button id="[[item.id]]" icon="create" on-tap="selectData"></paper-icon-button>
                        <paper-icon-button id="[[item.id]]" icon="delete" on-tap="confirmDelete"></paper-icon-button>
                    </div>
                </template>
            </vaadin-grid-column>
        </vaadin-grid>
        </custom-grid-zoom>
    </template>
    <script>
        Polymer({
            is: 'report-list',
            behaviors: [ReduxBehavior,FormatNumberBehavior],
            properties: {
                dataList: {
                    statePath: 'report.list'
                }
            },
            count:function(val){
                return val + 1;
            },
            selectData:function(e){
                var id = e.target.id;
                this.dispatchAction('REPORT_SELECT',this,id)
            },
            confirmDelete:function(e){
                this.fire('toast',{ 
                 status:'openDialog',
                 text:'ต้องการลบข้อมูลใช่หรือไม่ ?',
                 confirmed:this.deleteData.bind(this), 
                 data:e.target.id 
                 })
            },
            deleteData:function(status,id){
                if(status == true){
                    this.dispatchAction('REPORT_DELETE',this,id.data)
                }
              
            }
        });
    </script>
</dom-module>